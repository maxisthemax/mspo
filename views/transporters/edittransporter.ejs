<% include partials/header.ejs %>
<div id="transporter_edit" class="container-fluid">
    <div class="" style="border:1px solid">
    
        <form class="p-5" name="transporter_edit_form" method="POST" action="/transporter/edittransporter">

            <p class="h4 mb-4">Edit transporter</p>
                <div class="row">
                    <div class="col-sm-4">
                        <label for="textInput">Transporter Name</label>
                        <input type="text" id="transporterName" name="transporterName" class="form-control mb-4" required value="<%=transporter[0].transporterName%>">
                    </div>
                    <div class="col-sm-8">
                        <label for="textInput">Transporter Address</label>
                        <input type="text" id="transporterAdd" name="transporterAdd" class="form-control mb-4" value="<%=transporter[0].transporterAdd%>">
                    </div>
                </div>
                <div class="row">
                    
                </div>                
                 <br>
            <div class="row">
                    <div class="col-sm-4">
                        <label for="textInput">Transporter Vehicle No</label>
                        <input type="text" id="transporterVehNo" name="transporterVehNo" class="form-control mb-4" required value="<%=transporter[0].transporterVehNo%>">
                    </div>                 
                    <!---div class="col-sm-4">
                        <label for="textInput">Price 1mt</label>
                        <input type="number" step="0.01" id="priceMt" name="priceMt" class="form-control mb-4" required onchange="calculateTotalTransport()" value="<%=transporter[0].priceMt%>">
                    </div--->
                </div>
                <!---div class="row">
                    <div class="col-sm-4">
                        <label for="textInput">Net Weight</label>
                        <select class="form-control mb-4" id="nettWeight" name="nettWeight" required style="width: 100%" onchange="calculateTotalTransport()">
                            <option></option>
                            <% if(ticket_s){ for(var i = 0; i < ticket_s.length; i++) {%>
                            <option weight="<%= ticket_s[i].nettWeight %>" value=<%= ticket_s[i].ticketId %> <%if (ticket_s[i].ticketId==transporter[0].ticketId){ %>selected<%}%> >Ticket No:<%= ticket_s[i].ticketNo %>/Nett Weight:<%= ticket_s[i].nettWeight %>
                            </option>
                            <% }} %>
                        </select> 
                    </div>                 
                    <div class="col-sm-4">
                        <label for="textInput">Total Transport</label>
                        <input type="number" step="0.01" id="totalTransport" name="totalTransport" class="form-control mb-4" required readonly value="<%=transporter[0].totalTransporterCost%>">
                    </div> 
                </div--->
            <input type="hidden" id="transporterId" name="transporterId" value="<%= transporter[0].transporterId%>">
            <div class="row">
                <div class="col-sm-3">
                    <a href="/transporter/">
                        <input type=button class="btn btn-secondary btn-block" value="Back" onclick="">
                    </a>
                </div>
                <div class="col-sm-3">
                    <button class="btn btn-primary btn-block" type="submit">Save transporter</button>
                </div>
            </div>            

        </form>
    </div>
</div>

<% include partials/footer.ejs %>
</div>
<!-- /#page-content-wrapper -->
</div>

</body>

</html>

<script>
$(document).ready(function () {
    calculateTotalTransport();
});
function calculateTotalTransport(){
    
    var priceMt = $('#priceMt').val();
    var nettWeight =  $('#nettWeight').find('option:selected').attr('weight');
    var totalTransport = priceMt * nettWeight;
    $('#totalTransport').val(totalTransport.toFixed(2));    
}
</script>
